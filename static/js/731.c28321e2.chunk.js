"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[731],{555:function(e,r,t){var n=t(791),a=t(87),s=t(839),u=t(184),o=function(e){var r=e.username,t=e.fullName;return r&&t?(0,u.jsx)(a.rU,{to:"/p/".concat(r),className:"grid grid-cols-4 gap-4 mb-6 items-center",children:(0,u.jsxs)("div",{className:"flex items-center justify-between col-span-1",children:[(0,u.jsx)("img",{className:"rounded-full w-16 flex mr-3",src:"/images/avatars/".concat(r,".jpg"),alt:""}),(0,u.jsxs)("div",{className:"col-span-3",children:[(0,u.jsx)("p",{className:"font-bold text-sm",children:r}),(0,u.jsx)("p",{className:"text-sm",children:t})]})]})}):(0,u.jsx)(s.Z,{count:1,height:61})};r.Z=(0,n.memo)(o)},731:function(e,r,t){t.r(r),t.d(r,{default:function(){return f}});var n=t(165),a=t(861),s=t(439),u=t(791),o=t(689),c=t(303),i=t(87),l=t(155),p=t(606),d=t(184);function f(){var e=(0,o.s0)(),r=(0,u.useContext)(c.Z).firebase,t=(0,u.useState)(""),f=(0,s.Z)(t,2),m=f[0],h=f[1],x=(0,u.useState)(""),y=(0,s.Z)(x,2),w=y[0],v=y[1],b=(0,u.useState)(""),Z=(0,s.Z)(b,2),g=Z[0],j=Z[1],N=(0,u.useState)(""),k=(0,s.Z)(N,2),I=k[0],C=k[1],E=(0,u.useState)(""),S=(0,s.Z)(E,2),O=S[0],P=S[1],U=""===I||""===g,T=function(){var t=(0,a.Z)((0,n.Z)().mark((function t(a){var s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,(0,p.zl)(m);case 3:if(t.sent.length){t.next=24;break}return t.prev=5,t.next=8,r.auth().createUserWithEmailAndPassword(g,I);case 8:return s=t.sent,t.next=11,s.user.updateProfile({displayName:m});case 11:return t.next=13,r.firestore().collection("users").add({userId:s.user.uid,username:m.toLowerCase(),fullName:w,emailAddress:g.toLowerCase(),following:[],dateCreated:Date.now()});case 13:e(l.h1),t.next=22;break;case 16:t.prev=16,t.t0=t.catch(5),v(""),j(""),C(""),P(t.t0.message);case 22:t.next=25;break;case 24:P("That username is already taken");case 25:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(e){return t.apply(this,arguments)}}();return(0,u.useEffect)((function(){document.title="Sign-Up - Instagram"}),[]),(0,d.jsxs)("div",{className:"container flex mx-auto max-w-screen-md items-center h-screen",children:[(0,d.jsx)("div",{className:"flex w-3/5",children:(0,d.jsx)("img",{src:"/images/iphone-with-profile.jpg"})}),(0,d.jsxs)("div",{className:"flex flex-col w-2/5",children:[(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("h1",{className:"flex justify-center w-full",children:(0,d.jsx)("img",{src:"/images/logo.png",className:"mt-2 w-6/12 mb-4"})}),O&&(0,d.jsx)("p",{className:"mb-4 text-xs text-red-primary",children:O}),(0,d.jsxs)("form",{onSubmit:T,method:"POST",children:[(0,d.jsx)("input",{"aria-label":"Enter your username",type:"text",placeholder:"Username",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return h(r.value)},value:m}),(0,d.jsx)("input",{"aria-label":"Enter your full name",type:"text",placeholder:"Full name",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return v(r.value)},value:w}),(0,d.jsx)("input",{"aria-label":"Enter your email address",type:"text",placeholder:"Email address",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return j(r.value)},value:g}),(0,d.jsx)("input",{"aria-label":"Enter your password",type:"password",placeholder:"Password",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return C(r.value)},value:I}),(0,d.jsx)("button",{disabled:U,type:"submit",className:"bg-blue-medium text-black w-full rounded h-8 font-bold ".concat(U&&"cursor-not-allowed opacity-50"),children:"Sign Up"})]})]}),(0,d.jsxs)("div",{className:"flex fustify-center items-center flex-col w-full bg-white p-4 border border-gray-primary",children:[(0,d.jsx)("p",{className:"text-sm",children:"Have an account ?"}),(0,d.jsx)(i.rU,{to:l.ym,className:"font-bold",children:"Log in"})]})]})]})}},606:function(e,r,t){t.d(r,{Gm:function(){return I},IU:function(){return N},NS:function(){return x},T6:function(){return w},_T:function(){return g},dQ:function(){return l},ve:function(){return m},wP:function(){return b},xD:function(){return d},zl:function(){return c}});var n=t(439),a=t(413),s=t(165),u=t(861),o=(t(555),t(82));function c(e){return i.apply(this,arguments)}function i(){return(i=(0,u.Z)((0,s.Z)().mark((function e(r){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("users").where("username","==",r).get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return e.data().length>0})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=(0,u.Z)((0,s.Z)().mark((function e(r){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("users").where("username","==",r.toLowerCase()).get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,u.Z)((0,s.Z)().mark((function e(r){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("users").where("userId","==",r).get();case 2:return t=e.sent,n=t.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,r){return h.apply(this,arguments)}function h(){return(h=(0,u.Z)((0,s.Z)().mark((function e(r,t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("users").limit(10).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})).filter((function(e){return e.userId!==r&&!t.includes(e.userId)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,r,t){return y.apply(this,arguments)}function y(){return(y=(0,u.Z)((0,s.Z)().mark((function e(r,t,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.w.firestore().collection("users").doc(r).update({following:n?o.G.arrayRemove(t):o.G.arrayUnion(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,r,t){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)((0,s.Z)().mark((function e(r,t,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.w.firestore().collection("users").doc(r).update({followers:n?o.G.arrayRemove(t):o.G.arrayUnion(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,r){return Z.apply(this,arguments)}function Z(){return Z=(0,u.Z)((0,s.Z)().mark((function e(r,t){var n,c,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("photos").where("userId","in",t).get();case 2:return n=e.sent,c=n.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(c.map(function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var n,u,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,t.likes.includes(r)&&(n=!0),e.next=4,d(t.userId);case 4:return u=e.sent,o=u[0].username,e.abrupt("return",(0,a.Z)((0,a.Z)({username:o},t),{},{userLikedPhoto:n}));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function g(e){return j.apply(this,arguments)}function j(){return(j=(0,u.Z)((0,s.Z)().mark((function e(r){var t,u,c,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(r);case 2:return t=e.sent,u=(0,n.Z)(t,1),c=u[0],console.log("user",c),e.next=8,o.w.firestore().collection("photos").where("userId","==",c.userId).get();case 8:return i=e.sent,e.abrupt("return",i.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,r){return k.apply(this,arguments)}function k(){return(k=(0,u.Z)((0,s.Z)().mark((function e(r,t){var u,c,i,l,p;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.w.firestore().collection("users").where("username","==",r).where("following","array-contains",t).get();case 2:return u=e.sent,c=u.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),i=(0,n.Z)(c,1),l=i[0],p=void 0===l?{}:l,e.abrupt("return",p.userId);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,r,t,n,a){return C.apply(this,arguments)}function C(){return(C=(0,u.Z)((0,s.Z)().mark((function e(r,t,n,a,u){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t,a,r);case 2:return e.next=4,w(n,u,r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},839:function(e,r,t){t.d(r,{Z:function(){return i}});var n=t(439),a=t(413);function s(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=t(791),o=["count","wrapper","className","containerClassName","containerTestId","circle","style"],c=u.createContext({});function i(e){for(var r,t,i,l=e.count,p=void 0===l?1:l,d=e.wrapper,f=e.className,m=e.containerClassName,h=e.containerTestId,x=e.circle,y=void 0!==x&&x,w=e.style,v=s(e,o),b=u.useContext(c),Z=(0,a.Z)({},v),g=0,j=Object.entries(v);g<j.length;g++){var N=(0,n.Z)(j[g],2),k=N[0];"undefined"===typeof N[1]&&delete Z[k]}var I=(0,a.Z)((0,a.Z)((0,a.Z)({},b),Z),{},{circle:y}),C=(0,a.Z)((0,a.Z)({},w),function(e){var r=e.baseColor,t=e.highlightColor,n=e.width,a=e.height,s=e.borderRadius,u=e.circle,o=e.direction,c=e.duration,i=e.enableAnimation,l=void 0===i||i,p={};return"rtl"===o&&(p["--animation-direction"]="reverse"),"number"===typeof c&&(p["--animation-duration"]="".concat(c,"s")),l||(p["--pseudo-element-display"]="none"),"string"!==typeof n&&"number"!==typeof n||(p.width=n),"string"!==typeof a&&"number"!==typeof a||(p.height=a),"string"!==typeof s&&"number"!==typeof s||(p.borderRadius=s),u&&(p.borderRadius="50%"),"undefined"!==typeof r&&(p["--base-color"]=r),"undefined"!==typeof t&&(p["--highlight-color"]=t),p}(I)),E="react-loading-skeleton";f&&(E+=" ".concat(f));for(var S=null!==(r=I.inline)&&void 0!==r&&r,O=[],P=Math.ceil(p),U=0;U<P;U++){var T=C;if(P>p&&U===P-1){var G=null!==(t=T.width)&&void 0!==t?t:"100%",L=p%1,R="number"===typeof G?G*L:"calc(".concat(G," * ").concat(L,")");T=(0,a.Z)((0,a.Z)({},T),{},{width:R})}var A=u.createElement("span",{className:E,style:T,key:U},"\u200c");S?O.push(A):O.push(u.createElement(u.Fragment,{key:U},A,u.createElement("br",null)))}return u.createElement("span",{className:m,"data-testid":h,"aria-live":"polite","aria-busy":null===(i=I.enableAnimation)||void 0===i||i},d?O.map((function(e,r){return u.createElement(d,{key:r},e)})):O)}}}]);
//# sourceMappingURL=731.c28321e2.chunk.js.map